<!DOCTYPE html>
<html>
<head>
<meta charset="gb2312" />
<title>表单验证</title>
<style type="text/css">   
.sdhck{color:red;}
.onError{width:22px; height:22px; background:url(demo5-%E8%A1%A8%E5%8D%95%E9%AA%8C%E8%AF%81/img/reg3.gif) no-repeat;padding-left:15px;}
.onSuccess{ width:22px; height:22px; background:url(demo5-%E8%A1%A8%E5%8D%95%E9%AA%8C%E8%AF%81/img/reg4.gif) no-repeat; padding-left:15px;}
</style>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript">
 $(function(){
  $("form :input.tet").each(function(){//遍历
    var $xing=$("<strong class='sdhck'>*</strong>");
	$(this).parent().append($xing);
  });
  $('form :input').blur(function(){//失去焦点事件
    var $parent=$(this).parent();
	$parent.find(".forms").remove();
	if($(this).is('#use')){
	  if(this.value==""||this.value.length<6){
	    var mre="请输入至少6位的用户名";
		$parent.append('<span class="forms onError">'+mre+'</span>');
	  }else{
	    var okmre="输入正确"
         $parent.append('<span class="forms onSuccess">'+okmre+'</span>');
	  }
	};
	 if($(this).is('#email')){
	  if( this.value=="" || ( this.value!="" && !/.+@.+\.[a-zA-Z]{2,4}$/.test(this.value) ) ){
	   var mrg="请输入正确的地址";
	   $parent.append('<span class="forms onError">'+mrg+'</span>');
	  }
	  else{
	    var okmrg="输入正确";
         $parent.append('<span class="forms onSuccess">'+okmrg+'</span>');
	  }
	}
  }).keyup(function(){//键盘按键事件
	$(this).triggerHandler("blur");
  }).focus(function(){//焦点事件
	$(this).triggerHandler("blur");
	});
	$("#btn").click(function(){
	  $("form :input").trigger("blur");
	  var num=$('form .onError').length;
	  if(num){ return false;}alert("注册成功")
	});
	$("#res").click(function(){
	  $(".forms").remove();
	});
});
</script>
</head>
<body>
<form method="post" action="">
   <div class="inp">
     <label for="use">用&nbsp;户名：</label>
	 <input type="text" id="use" class="tet" />
   </div>
   <div class="inp">
     <label for="email">邮&nbsp;&nbsp;箱：</label>
	 <input type="text" id="email" class="tet" />
   </div>
   <div class="inp">
     <label for="fon">个人资料：</label>
	 <input type="text" id="fon" />
   </div>
   <div class="dub">
     <input type="submit" value="提交" id="btn" />
	 <input type="reset" id="res" />
   </div>
</form>
</body>
</html>
